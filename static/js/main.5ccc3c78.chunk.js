(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{119:function(A,t,e){"use strict";e.r(t);var g=e(0),i=e.n(g),h=e(4),o=e.n(h),n=(e(51),e(5)),r=e(2);var c=function(){return Object(r.jsxs)("footer",{children:[Object(r.jsx)("span",{children:"\xa9 "})," 2022 ",Object(r.jsx)("a",{href:"https://tomotoes.com/",target:"blank",children:"TOMOTOES.COM"})]})},l=e(39),s=e(6),a=function(A,t){return t||(t=0),Number("".concat(Math.round("".concat(A,"e").concat(t)),"e-").concat(t))},w=["iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO0Scz4DwAD7AIGykeHNgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsfP3lPwAHtgNhjbed3QAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO08+/9DwAECAIbYvarOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPUSjf9DwADUAHH2R4+qQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPsmL/9PwAGdALfLLTZgwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMM2FD3HwAFVQJ/wQSakQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcUtf+HwAF4QKaLYURggAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO007D9DwAC8wGkgAj2wQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPk7Z/6HwAEFAIygk/bbQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85i3/HwAFQAIxwDfEwwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU9Hj3HwAEAQJI0J8X3wAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNUk+f6DwACEgFQ4cywdAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcd/rmfwAHlANDxXJFGwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNsSun9DwAFVwJ0Dslp5gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMMSz/DwAEGgINf5zfKgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNcVZn/HwAF+gKTwpRdtAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN0z4z6DwAEFAILQQRF+gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMnnr4PwAF2gK8g2AjSgAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/WT+fwAI3wN/ghaxIAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsyAz6DwAEyAI0CG2DPQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOM3dv8HwAFugKeFHNe2gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNstk38DwAEjgIiTpcmsQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/7/wPwAI5ANwEHGVPQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkyuj5DwADYQH3Gb9KdwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mO8cXX9fwAIRgNdOpasaAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN80S37HwAGhAKRsld48QAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8rhn2HwAFzAJnxf9sDQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM8fP/ufwAIbAOAdKkwIAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM85tf3HwAGJwKj3F8CBQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMMbnrxHwAFqwK+oiXE3gAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcmvfiPwAGdwLsInOerQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOcI9v1HwAE5AJEQOnd/AAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mM03nvtPwAFuALHzaThLAAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsLSv4DwAFPwJkf7xuOwAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNMter+DwAEYQIr1DLJIQAAAABJRU5ErkJggg==","iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP81nPmPwAIHQNPG1c/KwAAAABJRU5ErkJggg=="].map((function(A){return"data:image/png;base64,"+A})),E=function(){return w[Math.floor(Math.random()*w.length)]};function d(A){var t=A.photos,e=A.onClick,h=A.margin,o=A.onLoad,c=Object(g.useState)(0),w=Object(n.a)(c,2),d=w[0],U=w[1],R=Object(g.useRef)(null);Object(g.useLayoutEffect)((function(){var A=null,t=new l.a((function(t){var e=t[0].contentRect.width;d!==e&&(A=window.requestAnimationFrame((function(){U(Math.floor(e))})))}));return t.observe(R.current),function(){t.disconnect(),window.cancelAnimationFrame(A)}}));var f=Object(g.useMemo)((function(){var A=function(A){var t=1;return A>=500&&(t=2),A>=900&&(t=3),A>=1500&&(t=4),A>=2200&&(t=5),A>=3e3&&(t=6),A>=3800&&(t=7),A>=4500&&(t=8),A>=5300&&(t=9),t}(d),e=function(A){for(var t=A.photos,e=A.columns,g=A.containerWidth,i=A.margin,h=(g-2*i*e)/e,o=t.map((function(A){var t=A.height/A.width*h;return Object(s.a)(Object(s.a)({},A),{},{width:a(h,1),height:a(t,1)})})),n=[],r=[],c=0;c<e;c++)n[c]=a(c*(h+2*i),1),r[c]=0;var l=o.map((function(A){var t=r.reduce((function(A,t,e){return t<r[A]?e:A}),0);A.top=r[t],A.left=n[t],r[t]=r[t]+A.height+2*i;var e=r.reduce((function(A,t,e){return t>r[A]?e:A}),0);return A.containerHeight=r[e],A}));return l}({containerWidth:d-1,columns:A,margin:h,photos:t}),g={position:"relative"};return e.length>0&&(g.height=e[e.length-1].containerHeight),[e,g]}),[d,h,t]),p=Object(n.a)(f,2),J=p[0],u=p[1],m=Object(g.useCallback)((function(A,g){var i=g.index;e(A,{index:i,photo:t[i],previous:t[i-1]||null,next:t[i+1]||null})}),[e,t]),B=Object(g.useMemo)((function(){return Array.from({length:t.length},(function(){return i.a.createRef()}))}),[t.length]);Object(g.useEffect)((function(){o(B.map((function(A){return A.current})))}),[o,B]);var j=Object(g.useMemo)((function(){return Array.from({length:t.length},E)}),[t.length]);return Object(r.jsx)("div",{id:"react-gallery",ref:R,style:u,children:J.map((function(A,t){var e=A.src,g=A.top,i=A.left,o=A.width,n=A.height,c=A.title,l=A.alt,s=j[t],a={position:"absolute",top:g,left:i,width:o,height:n,margin:h,background:"url(".concat(s,")")};return Object(r.jsxs)("div",{className:"react-photo",style:a,onClick:function(e){m(e,{photo:A,index:t})},children:[Object(r.jsx)("img",{ref:B[t],src:s,"data-original":e,width:o,height:n,alt:l,title:c}),Object(r.jsx)("span",{children:c})]},e)}))})}d.defaultProps={margin:8};var U=i.a.memo(d),R=e(13);function f(A){var t=A.viewerIsOpen,e=A.photos,g=A.currentPhoto,i=A.closeLightbox;return Object(r.jsx)(R.b,{children:t?Object(r.jsx)(R.a,{onClose:i,children:Object(r.jsx)(R.c,{currentIndex:g,showNavigationOnTouchDevice:!0,views:e.map((function(A){var t=A.src,e=A.title,g=A.size,i=g.height;return{src:t,caption:e,width:g.width,height:i}}))})}):null})}var p=i.a.memo(f),J=e(41),u=["src"];function m(A){var t=A.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,g=window.innerWidth||document.documentElement.clientWidth,i=t.top<=e&&t.top+t.height>=0,h=t.left<=g&&t.left+t.width>=0;return!(!i||!h)||t.left>=0&&t.top>=0&&t.left+t.width<=g&&t.top+t.height<=e}function B(A){if(A&&A.length&&!A.every((function(A){return!A}))){var t=Array.from({length:A.length}),e=function(A,t){var e,g,i;return function(){var h=this,o=arguments;if(!e)return e=!0,A.apply(h,o),void(i=Date.now());clearTimeout(g),g=setTimeout((function(){Date.now()-i>=t&&(A.apply(h,o),i=Date.now())}),Math.max(t-(Date.now()-i),0))}}(i,120);window.addEventListener("scroll",e,!1),setTimeout(i,0)}function g(A,e){var g=new Image,i=A.dataset.original;g.src=i,g.onload=function(){A.classList.add("loaded"),A.src=i,t[e]=!0},g.onerror=function(){t[e]=!0}}function i(){if(t.every((function(A){return!!A})))window.removeEventListener("scroll",e);else for(var i=0;i<A.length;++i)!t[i]&&m(A[i])&&g(A[i],i)}}var j,O=(j=[{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u5c0f\u9e1f\u5f00\u4f1a.jpeg",title:"\u5c0f\u9e1f\u5f00\u4f1a",alt:"\u5c0f\u9e1f\u5f00\u4f1a",width:39,height:29,size:{height:3472,width:4624}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83d\udc76\ud83c\udffb\ud83d\udd4a.jpeg",title:"\ud83d\udc76\ud83c\udffb\ud83d\udd4a",alt:"\ud83d\udc76\ud83c\udffb\ud83d\udd4a",width:39,height:29,size:{height:3472,width:4624}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83e\udeb6.jpeg",title:"\ud83e\udeb6",alt:"\ud83e\udeb6",width:39,height:29,size:{height:3472,width:4624}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83d\udc9a.jpeg",title:"\ud83d\udc9a",alt:"\ud83d\udc9a",width:29,height:39,size:{height:4624,width:3472}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83e\udd21.jpeg",title:"\ud83e\udd21",alt:"\ud83e\udd21",width:14,height:11,size:{height:1278,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Git branch.jpeg",title:"Git branch",alt:"Git branch",width:14,height:11,size:{height:1279,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u8001\u6811\u660f\u9e26.jpeg",title:"\u8001\u6811\u660f\u9e26",alt:"\u8001\u6811\u660f\u9e26",width:14,height:11,size:{height:1279,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83c\udc04\ufe0f.jpeg",title:"\ud83c\udc04\ufe0f",alt:"\ud83c\udc04\ufe0f",width:14,height:11,size:{height:1278,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83d\ude3e.jpeg",title:"\ud83d\ude3e",alt:"\ud83d\ude3e",width:14,height:11,size:{height:1278,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/1px\u5f15\u53d1\u7684\u8840\u6848.jpeg",title:"1px\u5f15\u53d1\u7684\u8840\u6848",alt:"1px\u5f15\u53d1\u7684\u8840\u6848",width:14,height:11,size:{height:1278,width:1706}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\ud83d\ude87\ud83c\udf27\ud83c\udfe0.jpeg",title:"\ud83d\ude87\ud83c\udf27\ud83c\udfe0",alt:"\ud83d\ude87\ud83c\udf27\ud83c\udfe0",width:34,height:23,size:{height:2771,width:4032}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/87\u306e\ud83d\udd4a.jpeg",title:"87\u306e\ud83d\udd4a",alt:"87\u306e\ud83d\udd4a",width:16,height:8,size:{height:972,width:1920}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u6258\u5c14\u5927\u5927.png",title:"\u6258\u5c14\u5927\u5927",alt:"\u6258\u5c14\u5927\u5927",width:1,height:1,size:{height:1744,width:1770}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u662f\u5fc3\u613f\u5361.jpeg",title:"\u662f\u5fc3\u613f\u5361",alt:"\u662f\u5fc3\u613f\u5361",width:16,height:9,size:{height:1080,width:1861}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u9ed1\u767d\ud83d\udc1f.png",title:"\u9ed1\u767d\ud83d\udc1f",alt:"\u9ed1\u767d\ud83d\udc1f",width:1,height:1,size:{height:910,width:914}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Im f**king love these guys.jpeg",title:"Im f**king love these guys",alt:"Im f**king love these guys",width:5,height:4,size:{height:488,width:621}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/WebRTC IS AWESOME.jpeg",title:"WebRTC IS AWESOME",alt:"WebRTC IS AWESOME",width:14,height:9,size:{height:1080,width:1728}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u5149\u8292\u4e07\u4e08.jpg",title:"\u5149\u8292\u4e07\u4e08",alt:"\u5149\u8292\u4e07\u4e08",width:9,height:12,size:{height:1440,width:1080}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u8f89\u591c\u5927\u5c0f\u59d0.jpg",title:"\u8f89\u591c\u5927\u5c0f\u59d0",alt:"\u8f89\u591c\u5927\u5c0f\u59d0",width:1,height:1,size:{height:300,width:300}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u65e0\u516c\u4f17\u53f7.jpg",title:"\u65e0\u516c\u4f17\u53f7",alt:"\u65e0\u516c\u4f17\u53f7",width:9,height:19,size:{height:2280,width:1080}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u649e\u8272.jpg",title:"\u649e\u8272",alt:"\u649e\u8272",width:1,height:1,size:{height:1080,width:1080}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/\u6253\u7fbd\u6bdb\u7403\u7684\u7b2c\u4e00\u5929.jpg",title:"\u6253\u7fbd\u6bdb\u7403\u7684\u7b2c\u4e00\u5929",alt:"\u6253\u7fbd\u6bdb\u7403\u7684\u7b2c\u4e00\u5929",width:9,height:12,size:{height:1440,width:1080}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Redirect.jpg",title:"Redirect",alt:"Redirect",width:9,height:8,size:{height:924,width:1086}},{src:"https://cdn.jsdelivr.net/gh/Tomotoes/gallery/photos/Google Earth \u4e2d\u7684\u5076\u9047.jpg",title:"Google Earth \u4e2d\u7684\u5076\u9047",alt:"Google Earth \u4e2d\u7684\u5076\u9047",width:9,height:19,size:{height:2248,width:1080}}],function(){var A=document.createElement("canvas");return!(!A.getContext||!A.getContext("2d"))&&0==A.toDataURL("image/webp").indexOf("data:image/webp")}()?j.map((function(A){var t=A.src,e=Object(J.a)(A,u);return Object(s.a)(Object(s.a)({},e),{},{src:t.replace(/((.jpg)|(.jpeg)|(.png))$/,".webp")})})):j);var S=function(){var A=Object(g.useState)(0),t=Object(n.a)(A,2),e=t[0],i=t[1],h=Object(g.useState)(!1),o=Object(n.a)(h,2),l=o[0],s=o[1],a=Object(g.useCallback)((function(A,t){t.photo;var e=t.index;i(e),s(!0)}),[]),w=Object(g.useCallback)((function(){i(0),s(!1)}),[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{photos:O,onLoad:B,onClick:a}),Object(r.jsx)(p,{photos:O,viewerIsOpen:l,currentPhoto:e,closeLightbox:w}),Object(r.jsx)(c,{})]})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("app"))},51:function(A,t,e){}},[[119,1,2]]]);
//# sourceMappingURL=main.5ccc3c78.chunk.js.map